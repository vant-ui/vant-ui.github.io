import{p as C}from"./Picker-56d328dd.js";import{u as V}from"./use-expose-80cfd2b2.js";import{P as b}from"./index-0274bfd5.js";import{A,y as P,D as E,u as O,e as _,B as N}from"./vue-libs-19c20d28.js";import{p as g,c as S,e as T}from"./use-translate-71d4880c.js";import{c as x,b as I,w as M}from"./with-install-560d59bf.js";const p="000000",j=["title","cancel","confirm","toolbar","columns-top","columns-bottom"],k=["title","loading","readonly","optionHeight","swipeDuration","visibleOptionNum","cancelButtonText","confirmButtonText"],r=(s="",c=p,e=void 0)=>({text:s,value:c,children:e});function D({areaList:s,columnsNum:c,columnsPlaceholder:e}){const{city_list:o={},county_list:l={},province_list:f={}}=s,m=+c>1,u=+c>2,h=()=>{if(m)return e.length?[r(e[0],p,u?[]:void 0)]:[]},t=new Map;Object.keys(f).forEach(n=>{t.set(n.slice(0,2),r(f[n],n,h()))});const i=new Map;if(m){const n=()=>{if(u)return e.length?[r(e[1])]:[]};Object.keys(o).forEach(a=>{const y=r(o[a],a,n());i.set(a.slice(0,4),y);const d=t.get(a.slice(0,2));d&&d.children.push(y)})}u&&Object.keys(l).forEach(n=>{const a=i.get(n.slice(0,4));a&&a.children.push(r(l[n],n))});const v=Array.from(t.values());if(e.length){const n=u?[r(e[2])]:void 0,a=m?[r(e[1],p,n)]:void 0;v.unshift(r(e[0],p,a))}return v}const[R,B]=S("area"),H=T({},g(C,k),{modelValue:String,columnsNum:x(3),columnsPlaceholder:I(),areaList:{type:Object,default:()=>({})}}),w=A({name:R,props:H,emits:["change","confirm","cancel","update:modelValue"],setup(s,{emit:c,slots:e}){const o=P([]),l=P(),f=E(()=>D(s)),m=(...t)=>c("change",...t),u=(...t)=>c("cancel",...t),h=(...t)=>c("confirm",...t);return O(o,t=>{const i=t.length?t[t.length-1]:"";i&&i!==s.modelValue&&c("update:modelValue",i)},{deep:!0}),O(()=>s.modelValue,t=>{if(t){const i=o.value.length?o.value[o.value.length-1]:"";t!==i&&(o.value=[`${t.slice(0,2)}0000`,`${t.slice(0,4)}00`,t].slice(0,+s.columnsNum))}else o.value=[]},{immediate:!0}),V({confirm:()=>{var t;return(t=l.value)==null?void 0:t.confirm()},getSelectedOptions:()=>{var t;return((t=l.value)==null?void 0:t.getSelectedOptions())||[]}}),()=>_(b,N({ref:l,modelValue:o.value,"onUpdate:modelValue":t=>o.value=t,class:B(),columns:f.value,onChange:m,onCancel:u,onConfirm:h},g(s,k)),g(e,j))}}),L=M(w),G=L;export{p as A,G as V,L as a};
