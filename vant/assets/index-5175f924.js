import{u as F}from"./use-id-5464e261.js";import{u as M}from"./use-expose-c87283be.js";import{b as K,O as q,i as L,$ as Q,m as Y,c as N,q as Z,o as G,u as J,t as X,a as ee}from"./use-translate-ad5eefa4.js";import{A as E,y as b,D as I,e as t,H as te,S as oe,Q as le,j as ne,v as ae,B as ie,r as se,o as ue,a as re,w as p,C as o,d as de,g as pe,t as ce,F as me}from"./vue-libs-6a67f9c6.js";import{t as S,n as ve,c as fe,m as Ve,w as W,b as we,u as z}from"./with-install-0d9206aa.js";import{H as Ce}from"./constant-ee6e27d7.js";import{C as xe,V as $}from"./index-c6c98967.js";import{I as be}from"./index-1c02023b.js";import{P as ge}from"./index-c47f1bdb.js";import{V as B}from"./index-445758ee.js";import{V as ye}from"./index-49cf8d1f.js";import"./use-route-ea8124d0.js";import"./index-4437616e.js";import"./use-lock-scroll-dce811cc.js";import"./use-touch-06ff9235.js";import"./use-lazy-render-7199096a.js";import"./on-popup-reopen-2b57f4ff.js";import"./index-f441590a.js";import"./interceptor-e18d38f8.js";import"./index-5b517ddf.js";const[R,T]=N("dropdown-menu"),Oe={overlay:S,zIndex:ve,duration:fe(.2),direction:Ve("down"),activeColor:String,closeOnClickOutside:S,closeOnClickOverlay:S},j=Symbol(R),ke=E({name:R,props:Oe,setup(a,{slots:s}){const m=F(),w=b(),u=b(),i=b(0),{children:r,linkChildren:v}=K(j),C=q(w),g=I(()=>r.some(e=>e.state.showWrapper)),y=I(()=>{if(g.value&&L(a.zIndex))return{zIndex:+a.zIndex+1}}),l=()=>{r.forEach(e=>{e.toggle(!1)})},V=()=>{a.closeOnClickOutside&&l()},n=()=>{if(u.value){const e=Z(u);a.direction==="down"?i.value=e.bottom:i.value=G.value-e.top}},U=()=>{g.value&&n()},A=e=>{r.forEach((d,c)=>{c===e?d.toggle():d.state.showPopup&&d.toggle(!1,{immediate:!0})})},P=(e,d)=>{const{showPopup:c}=e.state,{disabled:x,titleClass:O}=e;return t("div",{id:`${m}-${d}`,role:"button",tabindex:x?void 0:0,class:[T("item",{disabled:x}),{[Ce]:!x}],onClick:()=>{x||A(d)}},[t("span",{class:[T("title",{down:c===(a.direction==="down"),active:c}),O],style:{color:c?a.activeColor:""}},[t("div",{class:"van-ellipsis"},[e.renderTitle()])])])};return M({close:l}),v({id:m,props:a,offset:i,updateOffset:n}),Q(w,V),Y("scroll",U,{target:C,passive:!0}),()=>{var e;return t("div",{ref:w,class:T()},[t("div",{ref:u,style:y.value,class:T("bar",{opened:g.value})},[r.map(P)]),(e=s.default)==null?void 0:e.call(s)])}}}),Pe=W(ke),k=Pe;function he(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!le(a)}const[Te,D]=N("dropdown-item"),De={title:String,options:we(),disabled:Boolean,teleport:[String,Object],lazyRender:S,modelValue:z,titleClass:z},Se=E({name:Te,inheritAttrs:!1,props:De,emits:["open","opened","close","closed","change","update:modelValue"],setup(a,{emit:s,slots:m,attrs:w}){const u=te({showPopup:!1,transition:!0,showWrapper:!1}),{parent:i,index:r}=J(j);if(!i)return;const v=e=>()=>s(e),C=v("open"),g=v("close"),y=v("opened"),l=()=>{u.showWrapper=!1,s("closed")},V=e=>{a.teleport&&e.stopPropagation()},n=(e=!u.showPopup,d={})=>{e!==u.showPopup&&(u.showPopup=e,u.transition=!d.immediate,e&&(i.updateOffset(),u.showWrapper=!0))},U=()=>{if(m.title)return m.title();if(a.title)return a.title;const e=a.options.find(d=>d.value===a.modelValue);return e?e.text:""},A=e=>{const{activeColor:d}=i.props,c=e.value===a.modelValue,x=()=>{u.showPopup=!1,e.value!==a.modelValue&&(s("update:modelValue",e.value),s("change",e.value))},O=()=>{if(c)return t(be,{class:D("icon"),color:d,name:"success"},null)};return t(xe,{role:"menuitem",key:e.value,icon:e.icon,title:e.text,class:D("option",{active:c}),style:{color:c?d:""},tabindex:c?0:-1,clickable:!0,onClick:x},{value:O})},P=()=>{const{offset:e}=i,{zIndex:d,overlay:c,duration:x,direction:O,closeOnClickOverlay:H}=i.props,_=X(d);return O==="down"?_.top=`${e.value}px`:_.bottom=`${e.value}px`,ne(t("div",ie({style:_,class:D([O]),onClick:V},w),[t(ge,{show:u.showPopup,"onUpdate:show":h=>u.showPopup=h,role:"menu",class:D("content"),overlay:c,position:O==="down"?"top":"bottom",duration:u.transition?x:0,lazyRender:a.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${i.id}-${r.value}`,closeOnClickOverlay:H,onOpen:C,onClose:g,onOpened:y,onClosed:l},{default:()=>{var h;return[a.options.map(A),(h=m.default)==null?void 0:h.call(m)]}})]),[[ae,u.showWrapper]])};return M({state:u,toggle:n,renderTitle:U}),()=>{if(a.teleport){let e;return t(oe,{to:a.teleport},he(e=P())?e:{default:()=>[e]})}return P()}}}),Ie=W(Se),f=Ie,Ue={style:{padding:"5px 16px"}},Je=E({__name:"index",setup(a){const s=ee({"zh-CN":{disableMenu:"禁用菜单",switchTitle1:"包邮",switchTitle2:"团购",itemTitle:"筛选",expandDirection:"向上展开",customContent:"自定义菜单内容",customActiveColor:"自定义选中态颜色",option1:[{text:"全部商品",value:0},{text:"新款商品",value:1},{text:"活动商品",value:2}],option2:[{text:"默认排序",value:"a"},{text:"好评排序",value:"b"},{text:"销量排序",value:"c"}]},"en-US":{disableMenu:"Disable Menu",switchTitle1:"Title",switchTitle2:"Title",itemTitle:"Title",expandDirection:"Expand Direction",customContent:"Custom Content",customActiveColor:"Custom Active Color",option1:[{text:"Option1",value:0},{text:"Option2",value:1},{text:"Option3",value:2}],option2:[{text:"Option A",value:"a"},{text:"Option B",value:"b"},{text:"Option C",value:"c"}]}}),m=b(),w=b(!0),u=b(!1),i=b(0),r=b("a"),v=I(()=>s("option1")),C=I(()=>s("option2")),g=()=>{var y;(y=m.value)==null||y.toggle()};return(y,l)=>{const V=se("demo-block");return ue(),re(me,null,[t(V,{title:o(s)("basicUsage")},{default:p(()=>[t(o(k),null,{default:p(()=>[t(o(f),{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=n=>i.value=n),options:v.value},null,8,["modelValue","options"]),t(o(f),{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=n=>r.value=n),options:C.value},null,8,["modelValue","options"])]),_:1})]),_:1},8,["title"]),t(V,{title:o(s)("customContent")},{default:p(()=>[t(o(k),null,{default:p(()=>[t(o(f),{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=n=>i.value=n),options:v.value},null,8,["modelValue","options"]),t(o(f),{title:o(s)("itemTitle"),ref_key:"item",ref:m},{default:p(()=>[t(o($),{center:"",title:o(s)("switchTitle1")},{"right-icon":p(()=>[t(o(B),{modelValue:w.value,"onUpdate:modelValue":l[3]||(l[3]=n=>w.value=n)},null,8,["modelValue"])]),_:1},8,["title"]),t(o($),{center:"",title:o(s)("switchTitle2")},{"right-icon":p(()=>[t(o(B),{modelValue:u.value,"onUpdate:modelValue":l[4]||(l[4]=n=>u.value=n)},null,8,["modelValue"])]),_:1},8,["title"]),de("div",Ue,[t(o(ye),{type:"primary",block:"",round:"",style:{height:"40px"},onClick:g},{default:p(()=>[pe(ce(o(s)("confirm")),1)]),_:1})])]),_:1},8,["title"])]),_:1})]),_:1},8,["title"]),t(V,{title:o(s)("customActiveColor")},{default:p(()=>[t(o(k),{"active-color":"#ee0a24"},{default:p(()=>[t(o(f),{modelValue:i.value,"onUpdate:modelValue":l[5]||(l[5]=n=>i.value=n),options:v.value},null,8,["modelValue","options"]),t(o(f),{modelValue:r.value,"onUpdate:modelValue":l[6]||(l[6]=n=>r.value=n),options:C.value},null,8,["modelValue","options"])]),_:1})]),_:1},8,["title"]),t(V,{title:o(s)("expandDirection")},{default:p(()=>[t(o(k),{direction:"up"},{default:p(()=>[t(o(f),{modelValue:i.value,"onUpdate:modelValue":l[7]||(l[7]=n=>i.value=n),options:v.value},null,8,["modelValue","options"]),t(o(f),{modelValue:r.value,"onUpdate:modelValue":l[8]||(l[8]=n=>r.value=n),options:C.value},null,8,["modelValue","options"])]),_:1})]),_:1},8,["title"]),t(V,{title:o(s)("disableMenu")},{default:p(()=>[t(o(k),null,{default:p(()=>[t(o(f),{modelValue:i.value,"onUpdate:modelValue":l[9]||(l[9]=n=>i.value=n),disabled:"",options:v.value},null,8,["modelValue","options"]),t(o(f),{modelValue:r.value,"onUpdate:modelValue":l[10]||(l[10]=n=>r.value=n),disabled:"",options:C.value},null,8,["modelValue","options"])]),_:1})]),_:1},8,["title"])],64)}}});export{Je as default};
