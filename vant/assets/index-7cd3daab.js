import{f as w,s as T,a as s,g as A,p as B}from"./utils-47c911b3.js";import{P as E}from"./index-3ac19ec1.js";import{A as I,y as g,D as N,u as h,e as S,B as J}from"./vue-libs-6a67f9c6.js";import{J as u,p as K,c as R,e as U,V as y}from"./use-translate-982dff2e.js";import{w as _}from"./with-install-3eab31d5.js";const x=new Date().getFullYear(),[b]=R("date-picker"),j=U({},T,{columnsType:{type:Array,default:()=>["year","month","day"]},minDate:{type:Date,default:()=>new Date(x-10,0,1),validator:y},maxDate:{type:Date,default:()=>new Date(x+10,11,31),validator:y}}),q=I({name:b,props:j,emits:["confirm","cancel","change","update:modelValue"],setup(a,{emit:r,slots:M}){const n=g(a.modelValue),l=g(!1),v=()=>{const e=a.minDate.getFullYear(),t=a.maxDate.getFullYear();return s(e,t,"year",a.formatter,a.filter)},i=e=>e===a.minDate.getFullYear(),d=e=>e===a.maxDate.getFullYear(),V=e=>e===a.minDate.getMonth()+1,Y=e=>e===a.maxDate.getMonth()+1,m=e=>{const{minDate:t,columnsType:o}=a,c=o.indexOf(e),f=l.value?a.modelValue[c]:n.value[c];if(f)return+f;switch(e){case"year":return t.getFullYear();case"month":return t.getMonth()+1;case"day":return t.getDate()}},P=()=>{const e=m("year"),t=i(e)?a.minDate.getMonth()+1:1,o=d(e)?a.maxDate.getMonth()+1:12;return s(t,o,"month",a.formatter,a.filter)},k=()=>{const e=m("year"),t=m("month"),o=i(e)&&V(t)?a.minDate.getDate():1,c=d(e)&&Y(t)?a.maxDate.getDate():A(e,t);return s(o,c,"day",a.formatter,a.filter)},D=N(()=>a.columnsType.map(e=>{switch(e){case"year":return v();case"month":return P();case"day":return k();default:return[]}}));h(n,e=>{u(e,a.modelValue)||r("update:modelValue",e)}),h(()=>a.modelValue,(e,t)=>{l.value=u(t,n.value),e=w(e,D.value),u(e,n.value)||(n.value=e),l.value=!1},{immediate:!0});const C=(...e)=>r("change",...e),F=(...e)=>r("cancel",...e),O=(...e)=>r("confirm",...e);return()=>S(E,J({modelValue:n.value,"onUpdate:modelValue":e=>n.value=e,columns:D.value,onChange:C,onCancel:F,onConfirm:O},K(a,B)),M)}}),z=_(q),X=z;export{X as V};
