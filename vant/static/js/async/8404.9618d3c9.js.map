{"version":3,"file":"static/js/async/8404.9618d3c9.js","sources":["../../../node_modules/.pnpm/vue-loader@17.3.1_vue@3.3.4_webpack@5.89.0/node_modules/vue-loader/dist/index.js??clonedRuleSet-32.use[0]!../cjs/md-loader.cjs!../../vant/docs/markdown/migrate-from-v2.zh-CN.md","../../vant/docs/markdown/migrate-from-v2.zh-CN.md"],"sourcesContent":["import { render } from \"./migrate-from-v2.zh-CN.md.js?vue&type=template&id=0f8e3bc5!=!../../../../node_modules/.pnpm/vue-loader@17.3.1_vue@3.3.4_webpack@5.89.0/node_modules/vue-loader/dist/index.js??clonedRuleSet-32.use[0]!../../../vant-cli/cjs/md-loader.cjs!./migrate-from-v2.zh-CN.md?vue&type=template&id=0f8e3bc5\"\nconst script = {}\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.3.1_vue@3.3.4_webpack@5.89.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template><div class=\"van-doc-markdown-body\"><h1>从 v2 升级到 v3</h1>\n<div class=\"van-doc-card\"><h3 id=\"jie-shao\" tabindex=\"-1\">介绍</h3>\n<p>本文档提供了从 Vant 2 到 Vant 3 的升级指南。</p>\n</div><div class=\"van-doc-card\"><h3 id=\"sheng-ji-bu-zou\" tabindex=\"-1\">升级步骤</h3>\n<h4 id=\"1.-sheng-ji-vue-3\" tabindex=\"-1\">1. 升级 Vue 3</h4>\n<p>Vant 3 是基于 Vue 3 开发的，在使用 Vant 3 前，请将项目中的 Vue 升级到 3.0 以上版本。</p>\n<h4 id=\"2.-chu-li-bu-jian-rong-geng-xin\" tabindex=\"-1\">2. 处理不兼容更新</h4>\n<p>Vant 2 到 Vant 3 存在一些不兼容更新，请仔细阅读下方的不兼容更新内容，并依次处理。</p>\n</div><h2 id=\"bu-jian-rong-geng-xin\" tabindex=\"-1\">不兼容更新</h2>\n<div class=\"van-doc-card\"><h3 id=\"zu-jian-ming-ming-diao-zheng\" tabindex=\"-1\">组件命名调整</h3>\n<p>GoodsAction 商品导航组件重命名为 <strong>ActionBar 行动栏</strong>。</p>\n<pre><code class=\"language-html\" v-pre><span class=\"hljs-comment\">&lt;!-- Vant 2 --&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">van-goods-action</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">van-goods-action-icon</span> <span class=\"hljs-attr\">text</span>=<span class=\"hljs-string\">&quot;图标&quot;</span> /&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">van-goods-action-button</span> <span class=\"hljs-attr\">text</span>=<span class=\"hljs-string\">&quot;按钮&quot;</span> /&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">van-goods-action</span>&gt;</span>\n\n<span class=\"hljs-comment\">&lt;!-- Vant 3 --&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">van-action-bar</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">van-action-bar-icon</span> <span class=\"hljs-attr\">text</span>=<span class=\"hljs-string\">&quot;图标&quot;</span> /&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">van-action-bar-button</span> <span class=\"hljs-attr\">text</span>=<span class=\"hljs-string\">&quot;按钮&quot;</span> /&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">van-action-bar</span>&gt;</span>\n</code></pre>\n</div><div class=\"van-doc-card\"><h3 id=\"fei-qi-zu-jian\" tabindex=\"-1\">废弃组件</h3>\n<p>移除 SwitchCell 组件，可以直接使用 Cell 和 Switch 组件代替。</p>\n<pre><code class=\"language-html\" v-pre><span class=\"hljs-comment\">&lt;!-- Vant 2 --&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">van-switch-cell</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;标题&quot;</span> <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">&quot;checked&quot;</span> /&gt;</span>\n\n<span class=\"hljs-comment\">&lt;!-- Vant 3 --&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">van-cell</span> <span class=\"hljs-attr\">center</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;标题&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span> #<span class=\"hljs-attr\">right-icon</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">van-switch</span> <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">&quot;checked&quot;</span> <span class=\"hljs-attr\">size</span>=<span class=\"hljs-string\">&quot;24&quot;</span> /&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">van-cell</span>&gt;</span>\n</code></pre>\n</div><div class=\"van-doc-card\"><h3 id=\"dan-chuang-xing-zu-jian-v-model-bian-geng\" tabindex=\"-1\">弹窗型组件 v-model 变更</h3>\n<p>为了适配 Vue 3 的 v-model API 用法变更，所有提供 v-model 属性的组件在用法上有一定调整。以下弹窗类组件的 <code v-pre>v-model</code> 被重命名为 <code v-pre>v-model:show</code>：</p>\n<ul>\n<li>ActionSheet</li>\n<li>Calendar</li>\n<li>Dialog</li>\n<li>ImagePreview</li>\n<li>Notify</li>\n<li>Popover</li>\n<li>Popup</li>\n<li>ShareSheet</li>\n</ul>\n<pre><code class=\"language-html\" v-pre><span class=\"hljs-comment\">&lt;!-- Vant 2 --&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">van-popup</span> <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">&quot;show&quot;</span> /&gt;</span>\n\n<span class=\"hljs-comment\">&lt;!-- Vant 3 --&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">van-popup</span> <span class=\"hljs-attr\">v-model:show</span>=<span class=\"hljs-string\">&quot;show&quot;</span> /&gt;</span>\n</code></pre>\n</div><div class=\"van-doc-card\"><h3 id=\"biao-dan-xing-zu-jian-v-model-nei-bu-zhi-bian-geng\" tabindex=\"-1\">表单型组件 v-model 内部值变更</h3>\n<p>以下表单型组件 v-model 对应的 prop 重命名为 <code v-pre>modelValue</code>，event 重命名为 <code v-pre>update:modelValue</code>：</p>\n<ul>\n<li>Checkbox</li>\n<li>CheckboxGroup</li>\n<li>DatetimePicker</li>\n<li>DropdownItem</li>\n<li>Field</li>\n<li>Radio</li>\n<li>RadioGroup</li>\n<li>Search</li>\n<li>Stepper</li>\n<li>Switch</li>\n<li>Sidebar</li>\n<li>Uploader</li>\n</ul>\n<pre><code class=\"language-html\" v-pre><span class=\"hljs-comment\">&lt;!-- Vant 2 --&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">van-field</span> <span class=\"hljs-attr\">:value</span>=<span class=\"hljs-string\">&quot;value&quot;</span> @<span class=\"hljs-attr\">input</span>=<span class=\"hljs-string\">&quot;onInput&quot;</span> /&gt;</span>\n\n<span class=\"hljs-comment\">&lt;!-- Vant 3 --&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">van-field</span> <span class=\"hljs-attr\">:model-value</span>=<span class=\"hljs-string\">&quot;value&quot;</span> @<span class=\"hljs-attr\">update:model-value</span>=<span class=\"hljs-string\">&quot;onInput&quot;</span> /&gt;</span>\n</code></pre>\n</div><div class=\"van-doc-card\"><h3 id=\"qi-ta-v-model-diao-zheng\" tabindex=\"-1\">其他 v-model 调整</h3>\n<ul>\n<li>Circle: <code v-pre>v-model</code> 重命名为 <code v-pre>v-model:currentRate</code></li>\n<li>CouponList: <code v-pre>v-model</code> 重命名为 <code v-pre>v-model:code</code></li>\n<li>List: <code v-pre>v-model</code> 重命名为 <code v-pre>v-model:loading</code>，<code v-pre>error.sync</code> 重命名为 <code v-pre>v-model:error</code></li>\n<li>Tabs: <code v-pre>v-model</code> 重命名为 <code v-pre>v-model:active</code></li>\n<li>TreeSelect: <code v-pre>active-id.sync</code> 重命名为 <code v-pre>v-model:active-id</code></li>\n<li>TreeSelect: <code v-pre>main-active-index.sync</code> 重命名为 <code v-pre>v-model:main-active-index</code></li>\n</ul>\n</div><div class=\"van-doc-card\"><h3 id=\"hui-biao-shu-xing-ming-ming-diao-zheng\" tabindex=\"-1\">徽标属性命名调整</h3>\n<p>在之前的版本中，我们通过 info 属性来展示图标右上角的徽标信息，为了更符合社区的命名习惯，我们将这个属性重命名为 badge，影响以下组件：</p>\n<ul>\n<li>Tab</li>\n<li>Icon</li>\n<li>GridItem</li>\n<li>TreeSelect</li>\n<li>TabbarItem</li>\n<li>SidebarItem</li>\n<li>GoodsActionIcon</li>\n</ul>\n<p>同时内部使用的 Info 组件也会重命名为 Badge。</p>\n<pre><code class=\"language-html\" v-pre><span class=\"hljs-comment\">&lt;!-- Vant 2 --&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">van-icon</span> <span class=\"hljs-attr\">info</span>=<span class=\"hljs-string\">&quot;5&quot;</span> /&gt;</span>\n\n<span class=\"hljs-comment\">&lt;!-- Vant 3 --&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">van-icon</span> <span class=\"hljs-attr\">badge</span>=<span class=\"hljs-string\">&quot;5&quot;</span> /&gt;</span>\n</code></pre>\n</div><div class=\"van-doc-card\"><h3 id=\"chong-ming-ming-get-container-shu-xing\" tabindex=\"-1\">重命名 get-container 属性</h3>\n<p>Vue 3.0 中增加了 <code v-pre>Teleport</code> 组件，提供将组件渲染到任意 DOM 位置的能力，Vant 2 也通过 <code v-pre>get-container</code> 属性提供了类似的能力。为了与官方的 API 保持一致，Vant 中的 <code v-pre>get-container</code> 属性将重命名为 <code v-pre>teleport</code>。</p>\n<pre><code class=\"language-html\" v-pre><span class=\"hljs-comment\">&lt;!-- Vant 2 --&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">van-popup</span> <span class=\"hljs-attr\">get-container</span>=<span class=\"hljs-string\">&quot;body&quot;</span> /&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">van-popup</span> <span class=\"hljs-attr\">:get-container</span>=<span class=\"hljs-string\">&quot;getContainer&quot;</span> /&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n  <span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> {\n    <span class=\"hljs-attr\">methods</span>: {\n      <span class=\"hljs-title function_\">getContainer</span>(<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&#x27;#container&#x27;</span>);\n      },\n    },\n  };\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n\n<span class=\"hljs-comment\">&lt;!-- Vant 3 --&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">van-popup</span> <span class=\"hljs-attr\">teleport</span>=<span class=\"hljs-string\">&quot;body&quot;</span> /&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">van-popup</span> <span class=\"hljs-attr\">:teleport</span>=<span class=\"hljs-string\">&quot;container&quot;</span> /&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n  <span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> {\n    <span class=\"hljs-title function_\">beforeCreate</span>(<span class=\"hljs-params\"></span>) {\n      <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">container</span> = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&#x27;#container&#x27;</span>);\n    },\n  };\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n</code></pre>\n</div><div class=\"van-doc-card\"><h3 id=\"api-diao-zheng\" tabindex=\"-1\">API 调整</h3>\n<h4 id=\"area\" tabindex=\"-1\">Area</h4>\n<ul>\n<li><code v-pre>change</code> 事件参数不再传入组件实例</li>\n</ul>\n<h4 id=\"button\" tabindex=\"-1\">Button</h4>\n<ul>\n<li>蓝色按钮对应的类型由 <code v-pre>info</code> 调整为 <code v-pre>primary</code></li>\n<li>绿色按钮对应的类型由 <code v-pre>primary</code> 调整为 <code v-pre>success</code></li>\n<li><code v-pre>native-type</code> 的默认值由 <code v-pre>submit</code> 调整为 <code v-pre>button</code></li>\n</ul>\n<h4 id=\"checkbox\" tabindex=\"-1\">Checkbox</h4>\n<ul>\n<li>在 Cell 内部使用时，现在需要手动添加 <code v-pre>@click.stop</code> 来阻止事件冒泡</li>\n</ul>\n<h4 id=\"dialog\" tabindex=\"-1\">Dialog</h4>\n<ul>\n<li>默认关闭 <code v-pre>allow-html</code> 属性</li>\n<li><code v-pre>before-close</code> 属性用法调整，不再传入 done 函数，而是通过返回 Promise 来控制</li>\n</ul>\n<h4 id=\"datetimepicker\" tabindex=\"-1\">DatetimePicker</h4>\n<ul>\n<li><code v-pre>change</code> 事件参数不再传入组件实例</li>\n</ul>\n<h4 id=\"imagepreview\" tabindex=\"-1\">ImagePreview</h4>\n<ul>\n<li>移除 <code v-pre>async-close</code> 属性，可以使用新增的 <code v-pre>before-close</code> 属性代替</li>\n</ul>\n<h4 id=\"picker\" tabindex=\"-1\">Picker</h4>\n<ul>\n<li><code v-pre>change</code> 事件参数不再传入组件实例</li>\n<li>默认关闭 <code v-pre>allow-html</code> 属性</li>\n<li>默认开启 <code v-pre>show-toolbar</code> 属性</li>\n<li>级联选择下，<code v-pre>confirm</code>、<code v-pre>change</code> 事件返回的回调参数将包含为完整的选项对象。</li>\n</ul>\n<h4 id=\"popover\" tabindex=\"-1\">Popover</h4>\n<ul>\n<li><code v-pre>trigger</code> 属性的默认值调整为 <code v-pre>click</code></li>\n</ul>\n<h4 id=\"stepper\" tabindex=\"-1\">Stepper</h4>\n<ul>\n<li><code v-pre>async-change</code> 属性重命名为 <code v-pre>before-change</code>，并调整使用方法</li>\n</ul>\n<h4 id=\"swipecell\" tabindex=\"-1\">SwipeCell</h4>\n<ul>\n<li><code v-pre>open</code> 事件的 <code v-pre>detail</code> 参数重命名为 <code v-pre>name</code></li>\n<li><code v-pre>on-close</code> 属性重命名为 <code v-pre>before-close</code>，并调整参数结构</li>\n<li><code v-pre>before-close</code> 属性不再传入组件实例</li>\n</ul>\n<h4 id=\"toast\" tabindex=\"-1\">Toast</h4>\n<ul>\n<li><code v-pre>mask</code> 属性重命名为 <code v-pre>overlay</code></li>\n</ul>\n<h4 id=\"treeselect\" tabindex=\"-1\">TreeSelect</h4>\n<ul>\n<li><code v-pre>navclick</code> 事件重命名为 <code v-pre>click-nav</code></li>\n<li><code v-pre>itemclick</code> 事件重命名为 <code v-pre>click-item</code></li>\n</ul>\n</div><div class=\"van-doc-card\"><h3 id=\"zhu-ce-quan-ju-fang-fa\" tabindex=\"-1\">注册全局方法</h3>\n<p>Vant 2 中默认提供了 <code v-pre>$toast</code>、<code v-pre>$dialog</code> 等全局方法，但 Vue 3.0 不再支持直接在 Vue 的原型链上挂载方法，因此从 Vant 3.0 开始，使用全局方法前必须先通过 <code v-pre>app.use</code> 将组件注册到对应的 app 上。</p>\n<pre><code class=\"language-js\" v-pre><span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">Toast</span>, <span class=\"hljs-title class_\">Dialog</span>, <span class=\"hljs-title class_\">Notify</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;vant&#x27;</span>;\n\n<span class=\"hljs-comment\">// 将 Toast 等组件注册到 app 上</span>\napp.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-title class_\">Toast</span>);\napp.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-title class_\">Dialog</span>);\napp.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-title class_\">Notify</span>);\n\n<span class=\"hljs-comment\">// app 内的子组件可以直接调用 $toast 等方法</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> {\n  <span class=\"hljs-title function_\">mounted</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-variable language_\">this</span>.$toast(<span class=\"hljs-string\">&#x27;提示文案&#x27;</span>);\n  },\n};\n</code></pre>\n</div></div></template>"],"names":["render"],"mappings":";wKAMA,EAFiC,cAHlB,CAAC,EAGyC,CAAC,CAAC,SAAS,EAAAA,MAAM,CAAC,CAAC,gLCJvE,MAAM,uBAAuB,KAAlC,k1gBA8MY,MA9MZ"}